const request = require('request');

module.exports = {
  uploadFile: async (file, opts, metadata) => {
    return new Promise((resolve) => {
      request(
        {
          method: 'POST',
          url: `${opts.urlUploadFile}`,
          formData: {
            file: {
              value: file,
              options: {
                filename: metadata.filename,
                contentType: metadata.contentType,
              },
            },
          },
        },
        (e, res) => {
          if (e) {
            throw new Error(`error upload file to eueno : ${e}`);
          } else {
            resolve(JSON.parse(res.body));
          }
        },
      );
    });
  },
}
;
