const request = require('request');

module.exports = {
  uploadFileTorrent: async (file, opts, metadata) => {
    return new Promise((resolve) => {
      request(
        {
          method: 'POST',
          url: `${opts.urlUploadTorrent}`,
          formData: {
            file: {
              value: file,
              options: {
                filename: `${metadata.filename}.torrent`,
                contentType: null,
              },
            },
          },
        },
        (e, res) => {
          if (e) {
            throw new Error(`error upload file torrent to eueno : ${e}`);
          } else {
            resolve(JSON.parse(res.body));
          }
        },
      );
    });
  },
};
