const request = require('request');
const { api } = require('./config');

module.exports = {
  callCreateAccount: async (opts) => {
    return new Promise((resolve) => {
      request(
        {
          method: 'POST',
          url: `${opts.endpoint}${api.createAccount}`,
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            address: opts.account,
            signData: opts.signData,
          }),
        },
        function(e, res) {
          if (e) throw new Error(`error create account : ${e}`);
          resolve(JSON.parse(res.body));
        },
      );
    });
  },
};
